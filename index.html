<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GéoLycée</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        /* Ensures the app takes the full screen without overflow */
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
        }

        /* Use Inter font from Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

        #map {
            height: 100%;
            width: 100%;
            background-color: #f0f0f0; /* Map background color before tiles load */
        }
        
        /* Custom styles for Leaflet UI elements */
        .leaflet-control-attribution {
            font-size: 10px !important;
        }
        .leaflet-control-zoom {
            border-radius: 12px;
        }
        .leaflet-tooltip.name-tooltip {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            border: none;
            border-radius: 8px;
            padding: 4px 10px;
            font-weight: 600;
            color: #333;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Pulsing animation for the user's marker */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            70% { transform: scale(3); opacity: 0; }
            100% { transform: scale(3); opacity: 0; }
        }
        .pulse-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #3B82F6;
            transform-origin: center;
            animation: pulse 2s ease-out infinite;
            z-index: -1;
            transform: translate(-50%, -50%);
        }

        /* Custom switch toggle for settings */
        .switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 28px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #3B82F6;
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }

        /* --- Bottom Navigation Bar --- */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            border-top: 1px solid #e5e7eb;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.05);
            z-index: 1000;
        }
        .nav-content {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 448px; /* max-w-md */
            margin-left: auto;
            margin-right: auto;
            padding: 0.5rem 1rem; /* py-2 px-4 */
        }
        .menu-btn-container { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 0.25rem;
            border-radius: 12px; 
            transition: all 0.2s ease-in-out; 
            color: #4B5563; /* text-gray-600 */
            width: 72px; /* Increased width for better touch targets */
            height: 64px;
            justify-content: center;
        }
        .menu-btn-container.active-menu { 
            color: #4338CA; /* text-indigo-700 */
        }
        .menu-btn-container.active-menu .menu-icon {
            transform: scale(1.2) translateY(-2px);
            background-color: #E0E7FF; /* bg-indigo-100 */
        }
        .menu-btn-container span { 
            font-size: 0.75rem; /* text-xs */
            margin-top: 0.3rem; 
            font-weight: 600; 
            transition: opacity 0.2s ease-in-out;
        }
        .menu-btn-container:not(.active-menu) span {
            opacity: 0;
        }
        .menu-icon {
            padding: 0.75rem; /* p-3 */
            border-radius: 9999px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, getDoc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Globals and Configuration ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'geolycee-dev';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const locationsCollectionRef = `artifacts/${appId}/public/data/locations`;
        const lyceeCenter = [45.96239, 5.34721]; // Lycée de la plaine de l'Ain

        // --- Application State ---
        const appState = {
            map: null,
            auth: null,
            db: null,
            currentUser: null,
            userMarker: null,
            friendMarkers: {},
            userName: "",
            isSharing: true,
            watchId: null,
            isMapReady: false,
            isFirebaseReady: false,
            attributionControl: null, // To hold the attribution control instance
            tileLayers: {}, // To hold map tile layers
            currentTileLayer: null, // To hold the current tile layer
        };

        // --- UI Elements ---
        const ui = {
            loader: document.getElementById('loader'),
            appContainer: document.getElementById('app-container'),
            nameModal: document.getElementById('name-input-modal'),
            nameInput: document.getElementById('name-input'),
            saveNameBtn: document.getElementById('save-name-btn'),
            views: {
                map: document.getElementById('map-view'),
                friends: document.getElementById('friends-view'),
                settings: document.getElementById('settings-view'),
            },
            buttons: {
                map: document.getElementById('map-btn-container'),
                friends: document.getElementById('friends-btn-container'),
                settings: document.getElementById('settings-btn-container'),
            },
            status: document.getElementById('status'),
            userIdDisplay: document.getElementById('user-id-display'),
            copyIdBtn: document.getElementById('copy-id-btn'),
            shareLocationToggle: document.getElementById('share-location-toggle'),
            showAttributionToggle: document.getElementById('show-attribution-toggle'),
        };
        
        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', async () => {
            initMap();
            try {
                await initFirebase();
                setupEventListeners();
                // The view is now shown inside the functions that hide the loader
            } catch (error) {
                console.error("Fatal initialization error:", error);
                showStatus("L'application n'a pas pu démarrer.", 'error');
            }
        });

        const initFirebase = () => {
            return new Promise((resolve, reject) => {
                if (Object.keys(firebaseConfig).length === 0) {
                    return reject("Configuration Firebase manquante.");
                }

                try {
                    const app = initializeApp(firebaseConfig);
                    appState.auth = getAuth(app);
                    appState.db = getFirestore(app);

                    const unsubscribe = onAuthStateChanged(appState.auth, async (user) => {
                        unsubscribe(); // We only need to get the user once for initialization
                        if (user) {
                            appState.currentUser = user;
                            appState.isFirebaseReady = true;
                            await checkUserSession(); // This function will hide the loader
                            resolve();
                        } else {
                            reject(new Error("Authentication failed, no user returned."));
                        }
                    }, (error) => {
                        reject(error); // Handle errors during auth state observation
                    });

                    // Trigger the sign-in process
                    if (initialAuthToken) {
                        signInWithCustomToken(appState.auth, initialAuthToken).catch(reject);
                    } else {
                        signInAnonymously(appState.auth).catch(reject);
                    }
                } catch (error) {
                    console.error("Firebase Init Error:", error);
                    reject(error);
                }
            });
        };

        const initMap = () => {
            // Initialize map with attribution control disabled by default
            appState.map = L.map('map', { center: lyceeCenter, zoom: 19, zoomControl: false, attributionControl: false });

            const attributionText = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>';
            
            // Define tile layers
            appState.tileLayers.withLabels = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                attribution: attributionText
            });
            appState.tileLayers.withoutLabels = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png', {
                attribution: attributionText
            });

            // Set the default layer (without labels)
            appState.currentTileLayer = appState.tileLayers.withoutLabels;
            appState.currentTileLayer.addTo(appState.map);
            
            appState.isMapReady = true;
        };
        
        // --- User Session & Data ---
        const checkUserSession = async () => {
            const userDocRef = doc(appState.db, locationsCollectionRef, appState.currentUser.uid);
            const userDoc = await getDoc(userDocRef);
            if (userDoc.exists() && userDoc.data().name) {
                const data = userDoc.data();
                appState.userName = data.name;
                appState.isSharing = data.isSharing !== false; // Default to true if undefined
                ui.shareLocationToggle.checked = appState.isSharing;
                
                if (appState.isSharing) {
                    startLocationTracking();
                }
                listenToFriendLocations();
                
                // Show the main app
                ui.loader.classList.add('hidden');
                ui.appContainer.classList.remove('hidden');
                showView('map');
            } else {
                // Show the name modal
                ui.loader.classList.add('hidden');
                ui.nameModal.style.display = 'flex';
            }
        };

        const saveUserName = async () => {
            const name = ui.nameInput.value.trim();
            if (name) {
                appState.userName = name;
                await updateFirestoreLocation({ name: appState.userName, isSharing: true });
                ui.nameModal.style.display = 'none';
                ui.appContainer.classList.remove('hidden');
                startLocationTracking();
                listenToFriendLocations();
                showView('map');
            } else {
                showStatus("Veuillez entrer un prénom.", 'warning');
            }
        };

        // --- Location Tracking ---
        const startLocationTracking = () => {
            if (appState.watchId !== null) return;
            if ("geolocation" in navigator) {
                showStatus("Recherche de votre position...", 'info');
                appState.watchId = navigator.geolocation.watchPosition(
                    positionSuccess,
                    positionError,
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                );
            } else {
                showStatus("Géolocalisation non supportée.", 'error');
            }
        };

        const stopLocationTracking = async () => {
            if (appState.watchId !== null) {
                navigator.geolocation.clearWatch(appState.watchId);
                appState.watchId = null;
                await updateFirestoreLocation({ isSharing: false });
                showStatus("Partage de position arrêté.", 'info');
            }
        };

        const positionSuccess = (position) => {
            ui.status.classList.add('hidden');
            const { latitude, longitude } = position.coords;
            updateFirestoreLocation({ lat: latitude, lng: longitude, isSharing: true });
            updateUserMarker(latitude, longitude);
        };

        const positionError = (error) => {
            const messages = {
                1: "Accès refusé. Veuillez autoriser la géolocalisation.",
                2: "Position indisponible.",
                3: "Délai de recherche dépassé.",
            };
            showStatus(messages[error.code] || "Erreur de géolocalisation.", 'error');
        };
        
        // --- Firestore & Map Markers ---
        const updateFirestoreLocation = async (data) => {
            if (!appState.isFirebaseReady || !appState.currentUser) return;
            try {
                const userDocRef = doc(appState.db, locationsCollectionRef, appState.currentUser.uid);
                const payload = { ...data, timestamp: new Date() };
                await setDoc(userDocRef, payload, { merge: true });
            } catch (e) {
                console.error("Firestore Update Error:", e);
                showStatus("Erreur de synchronisation.", 'error');
            }
        };

        const updateUserMarker = (lat, lng) => {
            if (!appState.isMapReady) return;
            const userIcon = L.divIcon({
                className: 'custom-user-icon',
                html: `<div class="relative w-6 h-6 flex items-center justify-center"><div class="pulse-ring"></div><svg class="w-6 h-6 text-blue-500 filter drop-shadow-lg" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"/><circle cx="12" cy="12" r="5" fill="currentColor"/></svg></div>`,
                iconSize: [24, 24], iconAnchor: [12, 12]
            });

            if (!appState.userMarker) {
                appState.userMarker = L.marker([lat, lng], { icon: userIcon, zIndexOffset: 1000 }).addTo(appState.map);
                appState.userMarker.bindTooltip(appState.userName, { permanent: true, direction: 'top', offset: [0, -15], className: 'name-tooltip' }).openTooltip();
                appState.map.setView([lat, lng], 18);
            } else {
                appState.userMarker.setLatLng([lat, lng]);
                appState.userMarker.setTooltipContent(appState.userName);
            }
        };

        const listenToFriendLocations = () => {
            const q = collection(appState.db, locationsCollectionRef);
            onSnapshot(q, (snapshot) => {
                snapshot.docChanges().forEach((change) => {
                    const friendId = change.doc.id;
                    const data = change.doc.data();
                    
                    if (friendId === appState.currentUser?.uid) return;

                    const shouldDisplay = data.isSharing && data.lat && data.lng;

                    if (change.type === "removed" || !shouldDisplay) {
                        if (appState.friendMarkers[friendId]) {
                            appState.map.removeLayer(appState.friendMarkers[friendId]);
                            delete appState.friendMarkers[friendId];
                        }
                        return;
                    }
                    
                    if (change.type === "added" || change.type === "modified") {
                         const friendIcon = L.divIcon({
                            className: 'custom-friend-icon',
                            html: `<svg class="w-8 h-8 text-purple-700 filter drop-shadow-md" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"/></svg>`,
                            iconSize: [32, 32], iconAnchor: [16, 32]
                        });
                        if (appState.friendMarkers[friendId]) {
                            appState.friendMarkers[friendId].setLatLng([data.lat, data.lng]);
                            appState.friendMarkers[friendId].setTooltipContent(data.name || 'Ami');
                        } else {
                            appState.friendMarkers[friendId] = L.marker([data.lat, data.lng], { icon: friendIcon })
                                .addTo(appState.map)
                                .bindTooltip(data.name || 'Ami', { permanent: true, direction: 'top', offset: [0, -35], className: 'name-tooltip' })
                                .openTooltip();
                        }
                    }
                });
            });
        };
        
        // --- UI Logic & Event Handlers ---
        const setupEventListeners = () => {
            ui.saveNameBtn.addEventListener('click', saveUserName);
            ui.nameInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') saveUserName(); });
            
            // Navigation buttons
            ui.buttons.friends.addEventListener('click', () => showView('friends'));
            ui.buttons.settings.addEventListener('click', () => showView('settings'));
            ui.buttons.map.addEventListener('click', () => {
                if (!ui.views.map.classList.contains('hidden')) {
                    // If already on map view, reset to the default high school view
                    appState.map.setView(lyceeCenter, 19, { animate: true, pan: { duration: 1 } });
                    showStatus("Vue réinitialisée sur le lycée", 'info');
                } else {
                    // Otherwise, just switch to the map view
                    showView('map');
                }
            });

            ui.copyIdBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(appState.currentUser.uid).then(() => {
                    showStatus("ID copié dans le presse-papiers !", 'success');
                });
            });
            
            ui.shareLocationToggle.addEventListener('change', (e) => {
                appState.isSharing = e.target.checked;
                if (appState.isSharing) {
                    startLocationTracking();
                } else {
                    stopLocationTracking();
                }
            });

            ui.showAttributionToggle.addEventListener('change', (e) => {
                const showLabels = e.target.checked;
                
                // Remove the current layer
                if (appState.currentTileLayer) {
                    appState.map.removeLayer(appState.currentTileLayer);
                }

                if (showLabels) {
                    // Add the layer with labels
                    appState.currentTileLayer = appState.tileLayers.withLabels;
                    
                    // Add attribution control if it doesn't exist
                    if (!appState.attributionControl) {
                        appState.attributionControl = L.control.attribution({ position: 'bottomleft' }).addTo(appState.map);
                    }
                } else {
                    // Add the layer without labels
                    appState.currentTileLayer = appState.tileLayers.withoutLabels;

                    // Remove attribution control if it exists
                    if (appState.attributionControl) {
                        appState.map.removeControl(appState.attributionControl);
                        appState.attributionControl = null;
                    }
                }
                
                // Add the new layer to the map
                appState.currentTileLayer.addTo(appState.map);
            });
        };

        const showView = (viewName) => {
            Object.values(ui.views).forEach(v => v.classList.add('hidden'));
            ui.views[viewName].classList.remove('hidden');

            document.querySelectorAll('.menu-btn-container').forEach(el => el.classList.remove('active-menu'));
            ui.buttons[viewName].classList.add('active-menu');
            
            // Special handling for views
            if (viewName === 'map' && appState.isMapReady) {
                appState.map.invalidateSize(); // Fixes map rendering issues when container is hidden
            }
            if (viewName === 'friends') {
                ui.userIdDisplay.textContent = appState.currentUser ? appState.currentUser.uid : "Chargement...";
            }
        };

        const showStatus = (message, type = 'info') => {
            const colors = {
                info: 'bg-blue-100 text-blue-800',
                success: 'bg-green-100 text-green-800',
                warning: 'bg-yellow-100 text-yellow-800',
                error: 'bg-red-100 text-red-800',
            };
            ui.status.textContent = message;
            ui.status.className = `absolute top-4 left-1/2 -translate-x-1/2 text-center text-sm font-medium p-3 rounded-xl shadow-lg transition-all duration-300 z-[1001] ${colors[type]}`;
            ui.status.classList.remove('hidden');
            setTimeout(() => ui.status.classList.add('hidden'), 3000);
        };

    </script>
</head>
<body class="bg-gray-100 antialiased">
    
    <!-- Loader -->
    <div id="loader" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-[2000]">
        <svg class="animate-spin h-10 w-10 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <p class="mt-4 text-gray-600">Chargement de GéoLycée...</p>
    </div>

    <!-- Name Input Modal -->
    <div id="name-input-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm z-[1500] items-center justify-center p-4" style="display: none;">
        <div class="modal-content bg-white p-6 sm:p-8 rounded-2xl text-center w-full max-w-sm shadow-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Bienvenue sur GéoLycée</h2>
            <p class="text-gray-600 mb-6">Entrez votre prénom pour apparaître sur la carte.</p>
            <input id="name-input" type="text" placeholder="Votre prénom..." class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4 text-center">
            <button id="save-name-btn" class="w-full bg-blue-500 text-white p-3 rounded-lg font-bold hover:bg-blue-600 transition-all duration-200 shadow-md hover:shadow-lg">
                Commencer le partage
            </button>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="relative w-full h-full flex flex-col hidden">
        <!-- Floating Header -->
        <header class="absolute top-0 inset-x-0 p-4 flex items-center justify-center z-[1000] pointer-events-none">
            <div class="bg-white/80 backdrop-blur-md px-6 py-3 rounded-full shadow-lg">
                <h1 class="text-xl font-bold text-gray-800 tracking-tight">GéoLycée</h1>
            </div>
        </header>

        <!-- Views Container -->
        <main class="flex-grow w-full h-full relative overflow-hidden">
            <!-- Map View -->
            <div id="map-view" class="w-full h-full">
                <div id="map"></div>
                <div id="status" class="hidden"></div>
            </div>

            <!-- Friends & Settings Views -->
            <div id="friends-view" class="w-full h-full bg-gray-50 p-6 pt-24 overflow-y-auto hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Amis</h2>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-semibold text-gray-700 mb-2">Partagez votre ID</h3>
                    <p class="text-sm text-gray-500 mb-3">Donnez cet ID à vos amis pour qu'ils puissent vous ajouter.</p>
                    <div class="flex items-center gap-2 bg-gray-100 p-2 rounded-lg">
                        <p id="user-id-display" class="text-xs font-mono text-gray-600 truncate flex-grow"></p>
                        <button id="copy-id-btn" class="bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 transition active:scale-95">
                             <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        </button>
                    </div>
                </div>
                 <div class="text-center mt-12">
                     <svg class="w-16 h-16 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                     <p class="mt-4 text-gray-500">La liste d'amis sera bientôt disponible.</p>
                 </div>
            </div>

            <div id="settings-view" class="w-full h-full bg-gray-50 p-6 pt-24 overflow-y-auto hidden">
                 <h2 class="text-3xl font-bold text-gray-800 mb-6">Paramètres</h2>
                 <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200">
                     <div class="flex items-center justify-between">
                         <div>
                             <h3 class="font-semibold text-gray-700">Partager ma position</h3>
                             <p class="text-sm text-gray-500">Permet à vos amis de voir votre position.</p>
                         </div>
                         <label class="switch">
                             <input type="checkbox" id="share-location-toggle" checked>
                             <span class="slider"></span>
                         </label>
                     </div>
                 </div>
                 <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 mt-4">
                     <div class="flex items-center justify-between">
                         <div>
                             <h3 class="font-semibold text-gray-700">Noms des rues & Légende</h3>
                             <p class="text-sm text-gray-500">Affiche les détails et les crédits.</p>
                         </div>
                         <label class="switch">
                             <input type="checkbox" id="show-attribution-toggle">
                             <span class="slider"></span>
                         </label>
                     </div>
                 </div>
            </div>
        </main>
        
        <!-- Bottom Navigation Menu -->
        <nav class="bottom-nav">
            <div class="nav-content">
                <button id="friends-btn-container" class="menu-btn-container">
                    <div class="menu-icon">
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                    </div>
                    <span>Amis</span>
                </button>
                <button id="map-btn-container" class="menu-btn-container">
                    <div class="menu-icon">
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"/></svg>
                    </div>
                    <span>Carte</span>
                </button>
                <button id="settings-btn-container" class="menu-btn-container">
                    <div class="menu-icon">
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.44,0.17-0.48,0.41L9.22,5.72C8.63,5.96,8.1,6.29,7.6,6.67L5.21,5.71C4.99,5.62,4.74,5.69,4.62,5.91L2.7,9.23 c-0.11,0.2-0.06,0.47,0.12,0.61L4.85,11.4c-0.05,0.3-0.07,0.62-0.07,0.94c0,0.32,0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.38,2.91 c0.04,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17-0.48,0.41l0.38-2.91c0.59-0.24,1.12-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0.01,0.59-0.22l1.92-3.32c0.12-0.2,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
                    </div>
                    <span>Paramètres</span>
                </button>
            </div>
        </nav>
    </div>
</body>
</html>

